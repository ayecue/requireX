/* RequireX; version: 0.1.0.0; author: swe; */
(function(e){function T(e,t,n){var r={};!!n||(n=function(e){return e});for(var i=e.length;i--;){if(!e[i]){continue}r[e[i]]=t[n(i)]}return r}function N(){var e=arguments.length-1,t=true;if(C(arguments[e])=="boolean"){t=arguments[e];delete arguments[e]}for(var n=arguments[0],r=1,i;i=arguments[r];r++){if(C(i)!="object"){continue}for(var s in i){if(t||i[s]!=null&&i[s].length){n[s]=i[s]}}}return n}function C(e){var t=typeof e,n=arguments.callee[t];return n?n(e):t}function k(e){N(this,!!v.exec(e)&&function(){var e=T(["protocol","prefix",null,"uri"],f,L);return N(e,!!m.exec(f.$3)&&function(){return N(e.protocol||e.prefix?T(["host","dir"],f,L):{path:(f.$1||"")+(f.$2||"")},T([null,null,"file","ext"],f,L),false)}(),false)}(),{full:e},false);this.fullext=this.ext?this.types[this.ext.toLowerCase()]:"script"}function L(e){return"$"+(e+1)}function A(e){var t=RegExp.apply(new RegExp,g),n={},r;while(r=t.exec(e)){r=T(["operator","line"],RegExp,O);(n[r.operator]||(n[r.operator]=[])).push(r.line)}N(this,{cleared:e.replace(t,""),collection:n})}function O(e){return"$"+(e+1)}function M(){var e=this;N(this,{created:(new Date).getTime(),stack:[],ready:function(){e.complete.apply(e,arguments)}})}function _(){var e=new M,t=arguments,n=t.length,r=[],i=function(t,i){r[t]=i;var s=r.length;if(s==n){while(s--)if(r[s]==null)return;e.ready.apply(e,r)}};for(var s=0;s<n;function(e){t[e].then(function(){var t=arguments.length;i(e,!!t&&(t>1?arguments:arguments[0]))})}(s++));return e}function D(e){var t=new M,n=new A(e.file),r=new k(n.cleared),i=this;w.setPending(r,t);N(this,{run:function(){var i=w.get(r);!i||i.failure?w.load({cmds:n,path:r,settings:e.settings},false).then(function(e){w.set(r,e);t.ready(e)}):l(function(){t.ready(i)},0)}});return{self:this,promise:t}}function P(){var e=new M,t=C(arguments[0])=="array"?arguments[0]:arguments,n=[],r=[],i=function(){var n=[],i=[];for(var s=0,o;o=t[s];s++){w.isPending(o)?n.push(o):i[s]=w.get(r[s])}n.length?P.apply(null,n).then(function(){for(var t=0,n=i.length;t<n;t++){i[t]==null&&(i[t]=w.get(r[t]))}e.ready.apply(e,i)}):e.ready.apply(e,i)};for(var s=0,o;o=t[s++];){var u=new k(o);if(w.isPending(u)){n.push(w.getPending(u))}else if(!w.has(u)){var a=new M;(function(e,t){var n=0,r=c(function(){if(n++>d){h(r)}else if(w.isPending(e)){w.getPending(e).then(function(){t.ready()});h(r)}else if(w.has(e)){t.ready();h(r)}},10)})(u,a);n.push(a)}r.push(u)}n.length?_.apply(null,n).then(i):l(i,0);return e}function H(){var e=T(C(arguments[0])=="object"?b:y,arguments),t=[],n=[],r=function(e){if(!n[e]||!t[e])return false;n[e].then(function(){r(++e)});t[e].run();return true},i;for(var s=0,o;o=e.files[s++];){var u=new D({settings:e.script||{},file:o});t.push(u.self);n.push(u.promise)}return r(0)&&(i=_.apply(null,n)).then(function(){!!w.main&&i.created==w.main.created&&(w.main=null);!!e.callback&&e.callback.apply(null,arguments)})}var t="require",n="isLoaded",r="isPending",i="waitForFiles",s="swe",o="0.1.0.0",u=document,a=u.styleSheets,f=RegExp,l=setTimeout,c=setInterval,h=clearInterval,p=1e3,d=1e3,v=/^(https?:\/\/)?(?:(www)\.)?([^?]+)(.*)$/i,m=/^([^\/]+(?=\/))?(.*\/)?(.+?)(?:\.([^\.]+))?$/,g=["!([#\\-])([^;]+?);","g"],y=["files","callback"],b=["settings","files","callback"],w={},E={},S=function(){var e={},t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i),r;if(n||(r=t.match(/version\/([\.\d]+)/i))){e[n[1]]=true;e.version=r?r[1]:n[2];return e}e[navigator.appName]=true;e.version=navigator.appVersion;return e}(),x=function(){var e=u.getElementsByTagName("head");return e.length?e[0]:null}();E.js="script";E.css="stylesheet";E.jpg=E.jpeg=E.gif=E.png="image";N(C,{object:function(t){var n=t.length;return function(n){for(var r=0,i;i=t[r];r++){if(n instanceof e[i]){return i.toLowerCase()}}return"object"}}(["Array","Number","Date","RegExp"])});N(k.prototype,{types:E});N(A.prototype,{eachCollection:function(t,n){if(t){var r=t.length,i={},s,o,u,a;while(s=t[--r]){o=s.split(".");u=e[o.shift()];if(!u)break;while(a=o.shift()){if(!(u=u[a]))break}N(i,n.call(this,s,u))}return i}return null},getModuleVariables:function(){return this.eachCollection(this.collection["#"],function(e,t){var n={};n[e]=t;return n})},doAutoExecution:function(){return this.eachCollection(this.collection["-"],function(e,t){var n={};n[e]=C(t)=="function"?t.call(null):null;return n})}});N(w,{main:null,cache:{},pending:{},files:[],load:function(e){var t=new M,n=arguments;l(function(){if(!n.callee[e.path.fullext]){e.failure=true;return t.ready(e)}n.callee[e.path.fullext](e,function(n){if(!(e.failure=n)){e.variables=e.cmds.getModuleVariables();e.autoexecution=e.cmds.doAutoExecution()}t.ready(e)})},0);return t},setPending:function(e,t){!this.pending[e.fullext]&&(this.pending[e.fullext]={});this.pending[e.fullext][e.file]=t},isPending:function(e){return!!this.pending[e.fullext]&&!!this.pending[e.fullext][e.file]},getPending:function(e){return this.isPending(e)&&this.pending[e.fullext][e.file]},clearPending:function(e){if(this.isPending(e)){this.setPending(e,null);delete this.pending[e.fullext][e.file]}},has:function(e){return!!this.cache[e.fullext]&&!!this.cache[e.fullext][e.file]},get:function(e){return this.has(e)&&this.cache[e.fullext][e.file]},set:function(e,t){this.isPending(e)&&!t.failure&&this.clearPending(e);!this.cache[e.fullext]&&(this.cache[e.fullext]={});this.cache[e.fullext][e.file]=t}});N(w.load,{script:function(e,t){var n=document.createElement("script"),r=function(e,r){if(!n)return;var i=n.readyState;if(r||!i||/loaded|complete/i.test(i)){n.onerror=n.onload=n.onreadystatechange=null;!!n.parentNode&&n.parentNode.removeChild(n);n=null;t(!!r||!!(S.MSIE&&/loaded/.test(i)))}},i=function(e){r(e,true)};N(n,{type:"text/javascript",charset:"utf-8",async:true,onload:r,onreadystatechange:r,onerror:i,src:e.path.full},e.settings,false);x.appendChild(n)},stylesheet:function(e,t){var n=document.createElement("link"),r=function(e,r){if(!n)return;var i=n.readyState;if(r||!i||/loaded|complete/i.test(i)){h(o);n=n.onload=n.onreadystatechange=null;t(!!r||!!(S.MSIE&&/loaded/.test(i)))}},i=function(e){r(e,true)},s=0,o=c(function(){if(s>p)return i();try{!!n.sheet.cssRules&&r()}catch(e){s++}},10);N(n,{type:"text/css",rel:"stylesheet",charset:"utf-8",onload:r,onreadystatechange:r,onerror:i,href:e.path.full},e.settings,false);x.appendChild(n)},image:function(e,t){var n=new Image,r=function(e,r){if(!n)return;var i=n.readyState;if(r||!i||/loaded|complete/i.test(i)){n.onload=n.onerror=n.onabort=null;delete n;n=null;t(!!r||!!(S.MSIE&&/loaded/.test(i)))}},i=function(e){r(e,true)};N(n,{onload:r,onreadystatechange:r,onerror:i,onabort:i,src:e.path.full},e.settings,false)}});N(M.prototype,{then:function(e){this.stack.push(e);return this},next:function(){var e=new M,t=arguments;this.then(function(){H.apply(null,t).then(function(){e.ready.apply(e,arguments)})});return e},complete:function(){while(this.stack[0]){this.stack.shift().apply(null,arguments)}}});N(e,T([i,t,n,r],[P,function(){return w.main=w.main?w.main.next.apply(w.main,arguments):H.apply(null,arguments)},function(e){var t=new k(e);return w.has(t)&&!w.get(t).failure},function(e){return w.isPending(new k(e))}]))})(this.window||this)