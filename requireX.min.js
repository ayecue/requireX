/* RequireX; version: 0.5.0.0; author: swe; */
(function(e){"use strict";function D(){var e=new O,t=M.argsHandler.waitForFiles(arguments),n=[],r=m(t,function(e,t){var r=new C(t);if(M.pending.is(r)){n.push(M.pending.get(r))}else if(!M.cache.is(r)){var i=new O,s=0,o=a(function(){if(++s>h){f(o)}else if(M.pending.is(r)){M.pending.get(r).then(function(){i.complete()});f(o)}else if(M.cache.is(r)){i.complete();f(o)}},10);n.push(i)}this.result.push(r)},[]),i=function(){var t=[],n=m(r,function(e,n){M.pending.is(n)?t.push(n.full):this.result[e]=M.defined.get(n)||M.cache.get(n)},[]);t.length?D.apply(null,t).always(function(){e.complete(m(r,function(e,t){if(!M.cache.is(t)||!M.cache.get(t).success){this.result=false;this.skip=true}},true),m(r,function(e,t){n[e]==null&&(n[e]=M.cache.get(t))},n))}):e.complete(m(r,function(e,t){if(!M.cache.is(t)||!M.cache.get(t).success){this.result=false;this.skip=true}},true),n)};n.length?O.multi.apply(null,n).always(i):u(i,0);return e}function P(){var e=new O,t=M.argsHandler.require(arguments),n=[],r=m(t.files,function(e,r){var i=new _({settings:t.settings||{},file:r});this.result.push(i.shift());n.push(i.shift())},[]),i=O.multi.apply(null,n).always(function(){e.complete(m(arguments,function(e,t){if(!t.success){this.result=false;this.skip=true}},true),m(arguments,function(e,t){this.result.push(M.defined.get(t.path)||t)},[]))}),s=function(e){if(!n[e]||!r[e]){return false}n[e].always(function(){s(++e)});r[e].run();return true};return s(0)&&e.always(function(){!!M.master&&M.master.id==e.id&&(M.master=null);!!t.callback&&t.callback.apply(null,arguments)})}var t=["require","define","isLoaded","isPending","waitForFiles"],n="swe",r="1.0.0.0",i=document,s=i.styleSheets,o=RegExp,u=setTimeout,a=setInterval,f=clearInterval,l=[].slice,c=1e3,h=1e3,p=/^(https?:\/\/)?(?:(www)\.)?([^?]+)(.*)$/i,d=/^([^\/]+(?=\/))?(.*\/)?(.+?)(?:\.([^\.]+))?$/,v=["!([#\\-])([^;]+?);","g"],m=function(e,t,n){var r,i={result:n,skip:false};if(typeof e=="function"){while((r=e.call(i))&&!i.skip){t.call(i,r)}}else if(r=e.length){for(var s=0;s<r&&!i.skip;t.call(i,s,e[s++]));}else{for(var s in e){t.call(i,s,e[s]);if(i.skip){break}}}return i.result},g=l?function(e){return l.call(e)}:function(e){return m(e,function(e,t){this.result.unshift(t)},[])},y=function(e){return u(e,0)},b=function(e,t,n){!!n||(n=function(e){return e});return m(e,function(e,r){!!r&&(this.result[r]=t[n(e)])},{})},w=function(){var e=g(arguments),t=e.length-1,n=true,r=e.shift()||{};S(e[t])=="boolean"&&(n=e.pop());return m(e,function(e,t){S(t)=="object"&&(this.result=m(t,function(e,t){!!(n||t!=null&&t.length)&&(this.result[e]=t)},this.result))},r)},E=function(t,n){return m(t,function(e,t){if(S(t)==n){this.result=e;this.skip=true}})},S=function(e){return!!M&&!!M.typeifier?M.typeifier.compile(e):typeof e},x=(new function(){var e=this;e.add=function(t,n){S(t)=="string"?e[t]=n:m(t,function(t,r){e[r]=n});return e}}).add("js","script").add("css","stylesheet").add(["jpg","jpeg","gif","png"],"image"),T=function(){return m(arguments,function(e,t){var n=t.create;if(n){var r=this.result.prototype.create;this.result.prototype.create=r?function(){return m([n.apply(this,arguments),r.apply(this,arguments)],function(e,t){t&&(t instanceof Array?this.result.concat(t):this.result.push(t))},[])}:function(){return n.apply(this,arguments)};delete t.create}if(t.static){w(this.result,t.static);delete t.static}w(this.result.prototype,t)},function(){return!!this.create?this.create.apply(this,arguments):this})},N=new T({create:function(e){this.handler=e},compile:function(e){var t=typeof e,n=this.handler[t];return n?n(e):t}}),C=new T({"static":{filter:function(e){return"$"+(e+1)},types:x},create:function(e){w(this,{host:"local",ext:"js"},!!p.exec(e)&&function(){var e=b(["protocol","prefix",null,"uri"],o,C.filter);return w(e,!!d.exec(o.$3)&&function(){return w(e.protocol||e.prefix?b(["host","dir"],o,C.filter):{path:(o.$1||"")+(o.$2||"")},b([null,null,"file","ext"],o,C.filter),false)}(),false)}(),{full:e},false);this.fullext=this.ext?C.types[this.ext.toLowerCase()]:"script"}}),k=new T({"static":{filter:function(e){return"$"+(e+1)}},create:function(e){var t=RegExp.apply(new RegExp,v);w(this,{cleared:e.replace(t,""),collection:m(function(){return t.exec(e)},function(){var e=b(["operator","line"],RegExp,k.filter);(this.result[e.operator]||(this.result[e.operator]=[])).push(e.line)},{})})},eachCollection:function(t,n){if(t){return m(t,function(t,n){var r=n.split("."),i=e[r.shift()];!!i&&w(this.result,m(function(){return r.shift()},function(e){!(this.result=this.result[e])&&(this.skip=true)},i))},{})}return null},getModuleVariables:function(){return this.eachCollection(this.collection["#"],function(e,t){var n={};n[e]=t;return n})},doAutoExecution:function(){return this.eachCollection(this.collection["-"],function(e,t){var n={};n[e]=S(t)=="function"?t.call(null):null;return n})}}),L=new T({"static":{"native":{set:function(e,t){this[e]=t},is:function(e){return!!this[e]},get:function(e){return this.instance.is(e)&&this[e]},clear:function(e){if(this.instance.is(e)){this.instance.set(e,null);delete this[e]}}}},create:function(e){var t=this;t.container={instance:t};e=w({},L.native,e);m(e,function(e,n){if(!t[e]){S(n)=="function"?t[e]=function(){return n.apply(t.container,arguments)}:t[e]=n}})},toRoot:function(){return w(this,{is:function(e){return!!this.container[e.fullext]&&!!this.container[e.fullext].is(e.file)},set:function(e,t){!this.container[e.fullext]&&(this.container[e.fullext]=new L);this.container[e.fullext].set(e.file,t)},get:function(e){return this.is(e)&&this.container[e.fullext].get(e.file)},clear:function(e){if(this.is(e)){this.set(e,null);delete this.container[e.fullext]}}})}}),A=new T({create:function(e){w(this,{type:e,stack:[]})},add:function(e){this.stack.push(e)},is:function(e){return this.type==null||e===this.type},run:function(e,t){this.is(e)&&m(function(){return this.result.stack[0]},function(){this.result.stack.shift().apply(null,t)},this)}}),O=new T({"static":{multi:function(){var e=new O,t=arguments,n=t.length,r=[],i=function(t,i){r[t]=i;r.length==n&&m(r,function(e,t){if(t==null){this.result=false;this.skip=true}},true)&&e.complete(true,r)};m(t,function(e,t){t instanceof O&&t.always(function(){var t=arguments.length;i(e,!!t&&(t>1?arguments:arguments[0]))})});return e}},create:function(){var e=this,t=[new A(true),new A(false),new A];w(e,{states:t,id:(new Date).getTime()*Math.random(),then:function(n){t[0].add(n);return e},fail:function(n){t[1].add(n);return e},always:function(n){t[2].add(n);return e}})},complete:function(e,t){m(this.states,function(n,r){r.run(e,t)})},next:function(){var e=new O,t=arguments;this.always(function(){P.apply(null,t).then(function(){e.complete(true,arguments)}).fail(function(){e.complete(false,arguments)})});return e}}),M=new T({"static":{argsHandler:new T({"static":{waitForFiles:function(e){return S(e[0])=="array"?e[0]:e},require:function(e){return m({files:"array",settings:"object",callback:"function",process:"function"},function(t,n){var r=E(e,n);r!=null&&(this.result[t]=e[r])},{})}}}),typeifier:new N({object:function(t){var n=t.length;return function(n){return m(t,function(t,r){if(n instanceof e[r]){this.result=r.toLowerCase();this.skip=true}})||"object"}}(["Array","Number","Date","RegExp"])}),browser:function(){var e={},t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i),r;if(n||(r=t.match(/version\/([\.\d]+)/i))){e[n[1]]=true;e.version=r?r[1]:n[2];return e}e[navigator.appName]=true;e.version=navigator.appVersion;return e}(),appendTo:function(e){return e.length?e[0]:null}(i.getElementsByTagName("head")),cache:(new L).toRoot(),pending:(new L).toRoot(),defined:(new L).toRoot(),load:new T({"static":{script:function(e){var t=new O,n=document.createElement("script"),r=function(r,i){if(!n)return;var s=n.readyState;if(i||!s||/loaded|complete/i.test(s)){n.onerror=n.onload=n.onreadystatechange=null;!!n.parentNode&&n.parentNode.removeChild(n);n=null;t.complete(e.success=!i&&!(M.browser.MSIE&&/loaded/.test(s)))}},i=function(e){r(e,true)};w(n,{type:"text/javascript",charset:"utf-8",async:true,onload:r,onreadystatechange:r,onerror:i,src:e.path.full},e.settings,false);M.appendTo.appendChild(n);return t},stylesheet:function(e){var t=new O,n=document.createElement("link"),r=function(r,i){if(!n)return;var s=n.readyState;if(i||!s||/loaded|complete/i.test(s)){f(o);n.onload=n.onreadystatechange=null;!i&&(i=!!(M.browser.MSIE&&/loaded/.test(s)));!!i&&!!n.parentNode&&n.parentNode.removeChild(n);n=null;t.complete(e.success=!i)}},i=function(e){r(e,true)},s=0,o=a(function(){if(s>c)return i();try{!!n.sheet.cssRules&&r()}catch(e){s++}},10);w(n,{type:"text/css",rel:"stylesheet",charset:"utf-8",onload:r,onreadystatechange:r,onerror:i,href:e.path.full},e.settings,false);M.appendTo.appendChild(n);return t},image:function(e){var t=new O,n=new Image,r=function(r,i){if(!n)return;var s=n.readyState;if(i||!s||/loaded|complete/i.test(s)){n.onload=n.onerror=n.onabort=null;n=null;t.complete(e.success=!i&&!(M.browser.MSIE&&/loaded/.test(s)))}},i=function(e){r(e,true)};w(n,{onload:r,onreadystatechange:r,onerror:i,onabort:i,src:e.path.full},e.settings,false);return t}},create:function(e){var t=new O;y(function(){if(!M.load[e.path.fullext]){return t.complete(e.success=false,[e])}M.load[e.path.fullext](e).then(function(){e.variables=e.exec.getModuleVariables();e.autoexecution=e.exec.doAutoExecution()}).always(function(){t.complete(null,[e])})});return t}})}}),_=new T({create:function(e){var t=new O,n=new k(e.file),r=new C(n.cleared);this.run=function(){var i=M.cache.get(r);!i||!i.success?(new M.load({exec:n,path:r,settings:e.settings})).always(function(e){M.pending.clear(r);M.cache.set(r,e);t.complete(e.success,[e])}):y(function(){t.complete(true,[i])})};M.pending.set(r,t);return[this,t]}});w(e,b(t,[function(){return M.master=M.master?M.master.next.apply(M.master,arguments):P.apply(null,arguments)},function(){},function(e){return M.pending.is(new C(e))},function(e){var t=new C(e);return M.cache.is(t)&&M.cache.get(t).success},D]))})(this.window||this)